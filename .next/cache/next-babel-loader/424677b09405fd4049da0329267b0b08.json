{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\projectA1Platform\\\\components\\\\PostCard.js\";\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Card, Icon, Button, Avatar, Form, List, Input, Comment } from 'antd';\nimport PropTypes from 'prop-types';\nimport { FIX_POST } from '../reducers/post';\n\nconst PostCard = ({\n  post\n}) => {\n  const _leadingZeros = (n, digits) => {\n    var zero = '';\n    n = n.toString();\n\n    if (n.length < digits) {\n      for (let i = 0; i < digits - n.length; i++) zero += '0';\n    }\n\n    return zero + n;\n  };\n\n  const _getTimeStamp = () => {\n    var d = new Date();\n\n    var s = _leadingZeros(d.getFullYear(), 4) + '-' + _leadingZeros(d.getMonth() + 1, 2) + '-' + _leadingZeros(d.getDate(), 2) + ' ' + _leadingZeros(d.getHours(), 2) + ':' + _leadingZeros(d.getMinutes(), 2) + ':' + _leadingZeros(d.getSeconds(), 2);\n\n    return s;\n  }; //console.dir(post)\n\n\n  const dispatch = useDispatch();\n  const {\n    mainPosts,\n    me,\n    id,\n    check\n  } = useSelector(state => state.post);\n  const [fix, setFix] = useState(true);\n  const [fixText, setFixText] = useState(post.text);\n  const [fixTitle, setFixTitle] = useState(post.title);\n  const onFix = useCallback(e => {\n    if (me === post.me) {\n      setFix(pre => !pre);\n\n      if (!fix) {\n        const index = mainPosts.findIndex(r => r.id === post.id);\n        dispatch({\n          type: FIX_POST,\n          data: {\n            index,\n            fixText,\n            fixTitle,\n            date: _getTimeStamp()\n          }\n        });\n      }\n    }\n  }, [me, fix, fixText, fixTitle]);\n\n  const onDelete = () => {};\n\n  const onChangeFixTitle = useCallback(e => {\n    setFixTitle(e.target.value);\n  }, []);\n  const onChangeFixText = useCallback(e => {\n    setFixText(e.target.value);\n  }, []);\n  return React.createElement(\"div\", {\n    style: {\n      margin: \"15px\",\n      padding: 35\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(Card, {\n    title: React.createElement(React.Fragment, null, fix ? React.createElement(\"div\", {\n      style: {\n        width: \"70%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, post.title) : React.createElement(Input, {\n      style: {\n        width: \"70%\"\n      },\n      value: fixTitle,\n      onChange: onChangeFixTitle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, post.date)),\n    key: post.date,\n    extra: me == post.me ? React.createElement(\"div\", {\n      style: {\n        width: \"40px\",\n        display: 'flex',\n        justifyContent: 'space-between'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      type: \"edit\",\n      onClick: onFix,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }), React.createElement(Icon, {\n      type: \"close\",\n      onClick: onDelete,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    })) : null,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(Card.Meta, {\n    avatar: React.createElement(Avatar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, post.me[0]),\n    description: fix ? React.createElement(\"div\", {\n      style: post.check ? {\n        color: \"red\"\n      } : null,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, post.text) : React.createElement(Input.TextArea, {\n      value: fixText,\n      onChange: onChangeFixText,\n      rows: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  })));\n};\n\nPostCard.propTypes = {\n  post: PropTypes.shape({\n    title: PropTypes.string,\n    text: PropTypes.string,\n    me: PropTypes.string\n  })\n};\nexport default PostCard;","map":{"version":3,"sources":["C:\\Users\\USER\\projectA1Platform\\components\\PostCard.js"],"names":["React","useState","useEffect","useCallback","useRef","useSelector","useDispatch","Card","Icon","Button","Avatar","Form","List","Input","Comment","PropTypes","FIX_POST","PostCard","post","_leadingZeros","n","digits","zero","toString","length","i","_getTimeStamp","d","Date","s","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","dispatch","mainPosts","me","id","check","state","fix","setFix","fixText","setFixText","text","fixTitle","setFixTitle","title","onFix","e","pre","index","findIndex","r","type","data","date","onDelete","onChangeFixTitle","target","value","onChangeFixText","margin","padding","width","display","justifyContent","color","propTypes","shape","string"],"mappings":"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","sourcesContent":["import React,{useState, useEffect, useCallback, useRef} from 'react';\r\nimport {useSelector, useDispatch} from 'react-redux';\r\nimport {Card, Icon, Button, Avatar, Form, List, Input, Comment} from 'antd';\r\nimport PropTypes from 'prop-types';\r\nimport {FIX_POST} from '../reducers/post';\r\n\r\nconst PostCard = ({post}) => {\r\n\r\n  const _leadingZeros = (n, digits) => {\r\n    var zero = '';\r\n    n = n.toString();\r\n    if (n.length < digits) {\r\n      for (let i = 0; i < digits - n.length; i++)\r\n        zero += '0';\r\n    }\r\n    return zero + n;\r\n  }\r\n\r\n    const _getTimeStamp = () => {\r\n    var d = new Date();\r\n    var s =\r\n      _leadingZeros(d.getFullYear(), 4) + '-' +\r\n      _leadingZeros(d.getMonth() + 1, 2) + '-' +\r\n      _leadingZeros(d.getDate(), 2) + ' ' +\r\n      _leadingZeros(d.getHours(), 2) + ':' +\r\n      _leadingZeros(d.getMinutes(), 2) + ':' +\r\n      _leadingZeros(d.getSeconds(), 2);\r\n    return s;\r\n  }\r\n  //console.dir(post)\r\n  const dispatch = useDispatch();\r\n  const {mainPosts, me ,id,  check} = useSelector(state => state.post);\r\n  const [fix, setFix] = useState(true);\r\n  const [fixText, setFixText] = useState(post.text);\r\n  const [fixTitle, setFixTitle] = useState(post.title);\r\n\r\n  const onFix = useCallback(e =>{\r\n    if(me === post.me){\r\n      setFix(pre=>!pre);\r\n      if(!fix){\r\n        const index = mainPosts.findIndex(r=> r.id === post.id);\r\n        dispatch({\r\n          type:FIX_POST,\r\n          data:{index,fixText,fixTitle,date:_getTimeStamp()}\r\n        })\r\n      }\r\n    }\r\n  },[me, fix, fixText, fixTitle] );\r\n\r\n  const onDelete = () =>{\r\n\r\n  }\r\n\r\n  const onChangeFixTitle = useCallback(e=>{\r\n    setFixTitle(e.target.value);\r\n  },[]);\r\n  const onChangeFixText = useCallback(e=>{\r\n    setFixText(e.target.value);\r\n  },[]);\r\n\r\n\r\n  return(\r\n    <div style={{margin:\"15px\", padding:35}}>\r\n      <Card\r\n       title={(\r\n         <>\r\n          { fix ? <div style={{width:\"70%\"}}>{post.title}</div> : <Input style={{width:\"70%\"}} value={fixTitle} onChange={onChangeFixTitle}/> }\r\n          <div>{post.date}</div>\r\n         </>\r\n       )}\r\n       key={post.date}\r\n       extra={me  == post.me ? <div style={{width:\"40px\",display:'flex',justifyContent:'space-between'}}>\r\n         <Icon type=\"edit\" onClick={onFix}/>\r\n         <Icon type=\"close\" onClick={onDelete} />\r\n         </div> : null}\r\n      >\r\n       <Card.Meta\r\n         avatar={<Avatar>{post.me[0]}</Avatar>}\r\n         description={ fix ? <div style={ post.check ? {color:\"red\" } : null}>{post.text}</div> : <Input.TextArea value={fixText} onChange={onChangeFixText} rows={4}/>}\r\n       />\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n\r\nPostCard.propTypes = {\r\n  post: PropTypes.shape({\r\n    title:PropTypes.string,\r\n    text:PropTypes.string,\r\n    me:PropTypes.string\r\n  })\r\n}\r\n\r\nexport default PostCard\r\n"]},"metadata":{},"sourceType":"module"}